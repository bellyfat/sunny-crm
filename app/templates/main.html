{% extends "base.html" %}
{% block page_content %}

<div class="page-header">
    <h1>Dashboard</h1>
</div>

<div class="dashboard-block">
{% if agenda|length != 0 %}
    <h2>Your agenda for today: <span class="h2-link"><a href="{{ url_for('view_next_checkins') }}">[view upcoming tasks]</a></span></h2>
    <ol>
        {% for item in agenda %}
            <li><p><a href="{{ url_for('view_contact', contact_id=item[1], _external=True) }}">{{ item[0] }}</a>: {{ item[2] }}</p></li>
        {% endfor %}
    </ol>
{% else %}
    {% if updates|length != 0 %}
        <h2>Nothing on your agenda today. <span class="h2-link"><a href="{{ url_for('view_next_checkins') }}">[view upcoming tasks]</a></span></h2>
    {% else %}
        <h2>Your agenda for today: </h2>
        <ol>
            <li><p>Add your first contact <a href="{{ url_for('add_contact') }}">here</a></p></li>
        </ol>
    {% endif %}
{% endif %}
</div>

<div class="dashboard-block">
    <h2>Your progress today:</h2>
    <p>{{ new_contacts[0] }} <a href="{{ url_for('view_all_contacts')}}">contact(s)</a> added and {{ new_updates }} <a href="{{ url_for('view_update_stream')}}">update(s)</a> added.</p>
</div>

<div class="dashboard-block">
{% if updates|length != 0 %}
    {% if updates|length > 1 %}
        <h2>Your last {{ updates|length }} updates: <span class="h2-link"><a href="{{ url_for('view_update_stream') }}">[view all updates]</a></span></h2>
    {% else %}
        <h2>Your last update:</h2>
    {% endif %}
        <ol>
        {% for update in updates %}
          <li><p><span class="capitalize">{{ update[1]|friendly_dates }}</span>: {{ update[0] }} <a href="{{ url_for('view_contact', contact_id=update[3], _external=True) }}">({{ update[2] }})</a></p></li>
        {% endfor %}
        </ol>
{% else %}
    <h2>Recent updates:</h2>
    <p>None yetâ€”<a href="{{ url_for('add_contact') }}">add your first contact</a> to get get started!</p>
{% endif %}
</div>

<div>
    {{ wtf.quick_form(form=quick_nav, action=url_for('search')) }}
</div>

{% endblock %}